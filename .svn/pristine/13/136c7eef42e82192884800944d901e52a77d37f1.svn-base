var vehicleMake = [
    {
        "ID": 1,
        "Make_Name": "MARUTI",
        "logo": "MARUTI"
    },
    {
        "ID": 2,
        "Make_Name": "HYUNDAI",
        "logo": "HYUNDAI"
    },
    {
        "ID": 3,
        "Make_Name": "HONDA",
        "logo": "HONDA"
    },
    {
        "ID": 4,
        "Make_Name": "ASHOK LEYLAND",
        "logo": "ASHOK_LEYLAND"
    },
    {
        "ID": 5,
        "Make_Name": "ASTON MARTIN",
        "logo": "ASTON_MARTIN"
    },
    {
        "ID": 6,
        "Make_Name": "AUDI",
        "logo": "AUDI"
    },
    {
        "ID": 7,
        "Make_Name": "BENTLEY",
        "logo": "BENTLEY"
    },
    {
        "ID": 8,
        "Make_Name": "BMW",
        "logo": "BMW"
    },
    {
        "ID": 9,
        "Make_Name": "BUGATTI",
        "logo": "BUGATTI"
    },
    {
        "ID": 10,
        "Make_Name": "CHEVROLET",
        "logo": "CHEVROLET"
    },
    {
        "ID": 11,
        "Make_Name": "DAEWOO",
        "logo": "DAEWOO"
    },
    {
        "ID": 12,
        "Make_Name": "DATSUN",
        "logo": "DATSUN"
    },
    {
        "ID": 13,
        "Make_Name": "EICHER POLARIS",
        "logo": "EICHER_POLARIS"
    },
    {
        "ID": 14,
        "Make_Name": "FERRARI",
        "logo": "FERRARI"
    },
    {
        "ID": 15,
        "Make_Name": "FIAT",
        "logo": "FIAT"
    },
    {
        "ID": 16,
        "Make_Name": "FORCE MOTORS",
        "logo": "FORCE_MOTORS"
    },
    {
        "ID": 17,
        "Make_Name": "FORD",
        "logo": "FORD"
    },
    {
        "ID": 18,
        "Make_Name": "HINDUSTAN MOTOR",
        "logo": "HINDUSTAN_MOTOR"
    },
    {
        "ID": 19,
        "Make_Name": "HUMMER",
        "logo": "HUMMER"
    },
    {
        "ID": 20,
        "Make_Name": "ICML",
        "logo": "ICML"
    },
    {
        "ID": 21,
        "Make_Name": "ISUZU",
        "logo": "ISUZU"
    },
    {
        "ID": 22,
        "Make_Name": "JAGUAR",
        "logo": "JAGUAR"
    },
    {
        "ID": 23,
        "Make_Name": "JEEP",
        "logo": "JEEP"
    },
    {
        "ID": 24,
        "Make_Name": "KIA",
        "logo": "KIA"
    },
    {
        "ID": 25,
        "Make_Name": "LAMBORGHINI",
        "logo": "LAMBORGHINI"
    },
    {
        "ID": 26,
        "Make_Name": "LAND ROVER",
        "logo": "LAND_ROVER"
    },
    {
        "ID": 27,
        "Make_Name": "LEXUS",
        "logo": "LEXUS"
    },
    {
        "ID": 28,
        "Make_Name": "MAHINDRA",
        "logo": "MAHINDRA"
    },
    {
        "ID": 29,
        "Make_Name": "MAHINDRA RENAULT",
        "logo": "MAHINDRA_RENAULT"
    },
    {
        "ID": 30,
        "Make_Name": "MASERATI",
        "logo": "MASERATI"
    },
    {
        "ID": 31,
        "Make_Name": "MAYBACH",
        "logo": "MAYBACH"
    },
    {
        "ID": 32,
        "Make_Name": "MERCEDES-BENZ",
        "logo": "MERCEDES_BENZ"
    },
    {
        "ID": 33,
        "Make_Name": "MG",
        "logo": "MG"
    },
    {
        "ID": 34,
        "Make_Name": "MINI",
        "logo": "MINI"
    },
    {
        "ID": 35,
        "Make_Name": "MITSUBISHI",
        "logo": "MITSUBISHI"
    },
    {
        "ID": 36,
        "Make_Name": "NISSAN",
        "logo": "NISSAN"
    },
    {
        "ID": 37,
        "Make_Name": "OPEL",
        "logo": "OPEL"
    },
    {
        "ID": 38,
        "Make_Name": "PAL",
        "logo": "PAL"
    },
    {
        "ID": 39,
        "Make_Name": "PORSCHE",
        "logo": "PORSCHE"
    },
    {
        "ID": 40,
        "Make_Name": "PREMIER",
        "logo": "PREMIER"
    },
    {
        "ID": 41,
        "Make_Name": "RENAULT",
        "logo": "RENAULT"
    },
    {
        "ID": 42,
        "Make_Name": "REVA",
        "logo": "REVA"
    },
    {
        "ID": 43,
        "Make_Name": "ROLLS-ROYCE",
        "logo": "ROLLS_ROYCE"
    },
    {
        "ID": 44,
        "Make_Name": "SAN MOTORS",
        "logo": "SAN_MOTORS"
    },
    {
        "ID": 45,
        "Make_Name": "SKODA",
        "logo": "SKODA"
    },
    {
        "ID": 46,
        "Make_Name": "SSANGYONG",
        "logo": "SSANGYONG"
    },
    {
        "ID": 47,
        "Make_Name": "TATA",
        "logo": "TATA"
    },
    {
        "ID": 48,
        "Make_Name": "TOYOTA",
        "logo": "TOYOTA"
    },
    {
        "ID": 49,
        "Make_Name": "VOLKSWAGEN",
        "logo": "VOLKSWAGEN"
    },
    {
        "ID": 50,
        "Make_Name": "VOLVO",
        "logo": "VOLVO"
    }
];
var CONST_HORIZON_URL;
var Product_id = 1;
var varientArray = [];
var filterRTO = ["MH", "GJ", "KA", "DL", "UP"];
var RTOList = [];
var VehicleDivClass;
var RTODivClass;
var QT_vehicle_id;
var QT_vehicle_id;
var qt_number = "";
var divArray = [];
var siteURL = "";
var makename,modelname,fuelname,varientname;
$(document).ready(function () {
    var maketxt;
    var modeltxt;
    var statetxt;
	 siteURL =  window.location.href;
    if (window.location.hostname === 'qa.policyboss.com' || window.location.hostname === 'localhost')
    {
        CONST_HORIZON_URL = 'http://qa-horizon.policyboss.com:3000';
    }
    if (window.location.hostname === 'localhost')
    {
        CONST_HORIZON_URL = 'http://localhost:3000';
    }
    if (window.location.hostname.includes('www')) {
        CONST_HORIZON_URL = 'https://horizon.policyboss.com:5443';
    }
	
    if (siteURL.includes('request_file')) {
        CONST_HORIZON_URL = 'http://localhost:3000';
    }else if (siteURL.includes("qa")) {
        CONST_HORIZON_URL = 'http://qa-horizon.policyboss.com:3000';
    }
	
	if(siteURL.includes('QT')){
		getUrlVars();
		qt_number = getUrlVars()["QT"];
		if(qt_number != "" && qt_number != undefined){
			getQTPopupDetails(qt_number);
		}
	}
	
	PopulateModel();
	$('.makegrid').empty();
    for (var i in vehicleMake) {
        $('.makegrid').append("<div class='center-align' onclick='modelselect(" + JSON.stringify(vehicleMake[i]) + ");' id='make1_" + vehicleMake[i]['Make_Name'] + "' make=" + vehicleMake[i]['Make_Name'] + ">" + 
                "<div class='Logodiv'>" +
                "<img src='Logo/" + vehicleMake[i]['logo'] + ".png' width='100%'>" +
                "</div>" +
                "<div class='logoName'> <span id='" + vehicleMake[i]['Make_Name'] + "'>" + vehicleMake[i]['Make_Name'] + "</span>" +
                "</div>" +
                "</div>"
                )
    }
    $('.makePopup').click(function () {
        var x = $(".makePopup").position();
        $('.Make_section').css('top', x.top);
        $(".Make_section").slideDown(500, function () {
            $('.Make_section').slideDown(500);
        });
		$('#mySearch').val("");
		$('.makegrid').children().show();
		$('.VariName').show();
		if (VehicleDivClass === "makeDv") {
			$('#makeDv1').removeClass('active');
			VehicleDivClass = "";
			divArray = [];
            $('.varDv').hide("slide", { direction: "right" }, 500, function () {
                $('.makeDv').show("slide", { direction: "left" }, 500);
                $('.FuelDv').hide("slide", { direction: "right" }, 500);
                $('.modelDv').hide("slide", { direction: "right" }, 500);
            });
            //$('.faIconlt').hide();
        }
    });
    $('.closePop').click(function () {
        $(".Make_section").slideUp(500, function () {
            $('.Make_section').hide();
            $('.policyPopup').hide();
            $('.bonus_per').hide();
            $('.regist_Pop').hide();
        })
    });
	
	$('.closeErrorPopup').click(function () {
		$('.error_message').hide();
	});
    $('.faIconlt').click(function () {
        var element = $(this).closest('.popup');
        element.hide("slide", {direction: "right"}, 500, function () {
            element.prev().show("slide", {direction: "left"}, 500);
        });
		$('.stateName').show();
		$('.VariName').show();
		$('.modelGridDiv').show();
		$('.makegrid,.fuelgrid').children().show();
    });
	
    $('.faIconrt').click(function () {
			var currentDiv = $(this);
			var Divname = currentDiv[0].id;
			
			if(VehicleDivClass === Divname || divArray.includes(Divname) || VehicleDivClass === "FuelDv"){
				if(divArray.indexOf(Divname) === -1){
				divArray.push(Divname);	
				}
				var element = $(this).closest('.' + Divname);
				element.hide("slide", {direction: "left"}, 500, function () {
				element.next().show("slide", {direction: "right"}, 500);
			});
		}	
    });
	
	
    $('#model1').click(function () {
        $('.modelDv').hide("slide", {direction: "left"}, 500, function () {
            /* $('#spanvalue').val($('#Modelval').text()+","); */
            modeltxt = $('#Modelval').text();
            $('#spanvalue').val(maketxt + ',' + modeltxt);
            $('#spanvalue1').val(maketxt + ',' + modeltxt);
            $('.FuelDv').show("slide", {direction: "right"}, 200);

        });
    });
    /* ------------------------------------------------------------------------------ */
    $('#Petrol').click(function () {
        $('.FuelDv').hide("slide", {direction: "left"}, 500, function () {
            $('.varDv').show("slide", {direction: "right"}, 200);
        });
    });
    $('#Variant_val').click(function () {
        var varitxt = $('#Variant_val').text();
        $('#spanvalue').val(maketxt + ',' + modeltxt + ',' + varitxt);
        $('#spanvalue1').val(maketxt + ',' + modeltxt + ',' + varitxt);
        $('.Make_section').hide();
        $('#fuelvalue').val("PETROL");
        $('#fuelvalue1').val("PETROL");
    });
    $('#Variant_val1').click(function () {
        var varitxt = $('#Variant_val1').text();
        $('#spanvalue').val(maketxt + ',' + modeltxt + ',' + varitxt);
        $('#spanvalue1').val(maketxt + ',' + modeltxt + ',' + varitxt);
        $('.Make_section').hide();
        $('#fuelvalue').val("DIESEL");
        $('#fuelvalue1').val("DIESEL");
    });



    /* ------ Registration Popup */
    $('.regitPopup').click(function () {
		$('#mySearch1').val("");
        var x = $(".regitPopup").position();
        $('.regist_Pop').css('top', 0);
        $(".regist_Pop").slideDown(900, function () {
            $('.regist_Pop').show();
        });
		
            
            $('.nextSec').hide("slide", { direction: "left" }, 500, function () {
                $('.InnerDiv').show("slide", { direction: "right" }, 500);
            });
        PopulateModel();
    });
    $('.copyregi').click(function () {
        var x = $(".copyregi").position();
        $('.regist_Pop').css('top', x.top);
        $(".regist_Pop").slideDown(900, function () {
            $('.regist_Pop').show();
        });
    });
    $('.stateback').click(function () {
        $('.nextSec').hide("slide", {direction: "right"}, 500, function () {
            $('.InnerDiv').show("slide", {direction: "left"}, 500);
        });
    });
    $('#showMoreBtn,#showcityBtn').click(function () {
        $('#showMoreBtn,#showcityBtn').hide();
        $('.nodisplay').show();
        $('#showTopBtn,#lessCityBtn').show();
        $('.makegrid,.shortgrid').css({'overflow-y': 'scroll', 'height': '225px'});
    });
    $('#showTopBtn,#lessCityBtn').click(function () {
        $('#showMoreBtn,#showcityBtn').show();
        $('.nodisplay').hide();
        $('#showTopBtn,#lessCityBtn').hide();
        $('.makegrid,.shortgrid').css({'overflow-y': 'hidden', 'height': 'auto'});
    });
	setTimeout(function(){
		$(".QTnoClaimNo").prop("checked", true);
		$(".QTncbNo").prop("checked", true);
		}, 10);
});

function PopulateModel() {
    $.get(CONST_HORIZON_URL + '/vehicles/getrto/', function (res) {
        var rtoData = res
        var FilterRTO = [];
			for (var i in rtoData) {
				var rtoPrefix = rtoData[i]["VehicleCity_RTOCode"].toString().slice(0, 2);
                    if (filterRTO.indexOf(rtoPrefix) > -1) {
                        FilterRTO.push(rtoData[i]);
                        const index = rtoData.findIndex(x => x.VehicleCity_RTOCode === rtoData[i]["VehicleCity_RTOCode"]);
                        if (index > -1) {
                            rtoData.splice(index, 1);
                        }
                    }
                }
                for (var i in rtoData) {
                    FilterRTO.push(rtoData[i]);
                }
                var rtoArray = FilterRTO;
                //console.log('FilterRTO' + JSON.stringify(FilterRTO));

                //console.log('RTOdata' + JSON.stringify(Get_RTO));
			$('.shortgrid').empty();	
		for (var k in rtoArray) {
		 $('.shortgrid').append(
			"<div class='txt stateName' onclick='PlaceofReg(" + JSON.stringify(rtoArray[k]) + ");' title=" + rtoArray[k]['State_Name']
			+ " id='" + rtoArray[k]['_id']+ "'>"+ rtoArray[k]['VehicleCity_RTOCode'].slice(0, 2) + "</div>"
		 )
		}
    });

}
function PlaceofReg(selectedRTO){
	VehicleDivClass = "InnerDiv";
	$('#' + VehicleDivClass + '1').addClass('active');
	$('#mySearch1').val("");
	console.log(selectedRTO);
	var RTO = selectedRTO.Rtolist;
	RTO.sort(function (a, b) {
            var x = a.VehicleCity_RTOCode.toLowerCase();
            var y = b.VehicleCity_RTOCode.toLowerCase();
            if (x < y) { return -1; }
            if (x > y) { return 1; }
            return 0;

    });
    RTOList = RTO;
	$('.shortgrid1').empty();
	for (var k in RTOList) {
		 $('.shortgrid1').append(
			"<div class='txt' onclick='FinalRTODisplay(" + JSON.stringify(RTOList[k]) + ");' title=" + RTOList[k]['RTO_City']
			+ " id='" + RTOList[k]['VehicleCity_RTOCode'] + "'>" + RTOList[k]['VehicleCity_RTOCode'] + "</br>" +  RTOList[k]['RTO_City'] + "</div>"
		 )
	}
	$('.InnerDiv').hide("slide", {direction: "left"}, 500, function () {
        $('.nextSec').show("slide", {direction: "right"}, 500);
        $('.sec_content').css({'height': '250px', 'overflow-y': 'scroll'});
    });
}
function FinalRTODisplay(finalRTO) {
        var RTOCode = finalRTO.VehicleCity_RTOCode;
		var RTOCity = finalRTO.RTO_City;
        var fullRTO = RTOCode + ' - ' + RTOCity;
        $('#Registvalue').val(fullRTO);
		$('#RTO_Id').val(finalRTO.VehicleCity_Id);
        $('.regist_Pop').hide();
        
    }
function modelselect(make){
	$('#mySearch').val("");
	makename = make.Make_Name;
    $('.spanvalue1').text(makename);
	VehicleDivClass = "makeDv";
	$('#' + VehicleDivClass + '1').addClass('active');
	  $.get(CONST_HORIZON_URL + '/vehicles/getmodel_variant/'+ Product_id + '/' + make.Make_Name, function (res) {
		  var modelArray = res;
		  console.log(res);
            var makeAttr = $(this).attr('make');
            console.log(makeAttr);
			$('.Modelgrid').empty();
            $('.makeDv').hide("slide", {direction: "left"}, 500, function () {
                $('.Modelgrid').css('display', 'grid');
                $('.modelDv').show("slide", {direction: "right"}, 500);
				for (var i in modelArray) {
					$('.Modelgrid').append(
					"<div class='modelGridDiv center-align' onclick='FuelType(" + JSON.stringify(modelArray[i]) + ");' id='model_"  + modelArray[i]['Model_ID'] + "'>" +
					"<div class='modelGridDiv logoName'>"+
					"<span class='modelGridDiv' id='Modelval" + modelArray[i]['Model_ID'] + "'>" + modelArray[i]['_id'] + "</span>" + 
					"</div>"+
					"</div>"
					)
				}
            });
	  });
	 
}

function FuelType(model){
	$('#mySearch').val("");
	VehicleDivClass = "modelDv";
	divArray.push("makeDv");	
	modelname = model._id
	$('.spanvalue1').text(makename + ' / ' + modelname);
	$('#' + VehicleDivClass + '1').addClass('active');
	var UpdatedFuelList = [];
	varientArray = [];
	console.log(model);
	var model_id = model.Model_ID;
	var model_name = model._id;
	var varient_list = model.Variantlist;
	$('.modelDv').hide("slide", {direction: "left"}, 500, function () {
        $('.FuelDv').show("slide", {direction: "right"}, 200);
    });
	//var url = '/vehicles/GetFuelVariant?Model_ID=' + model_id + '&Product_Id=' + Product_id; //UAT
	//var url = '/vehicles/beta_GetFuelVariant' + '/' + model_id + '/' + Product_id  //LIVE
	var url = siteURL.includes('https:') ? '/vehicles/beta_GetFuelVariant' + '/' + model_id + '/' + Product_id : '/vehicles/GetFuelVariant?Model_ID=' + model_id + '&Product_Id=' + Product_id;
	$.get(CONST_HORIZON_URL + url, function (res) {
		console.log(res);
		var variantrArray = res;
		var fuelList = res['FuelList'];
		varientArray = res['VariantList'];
            if (Product_id === 1) {
                for (var i = 0; i < fuelList.length; i++) {
                    var j = Object.keys(fuelList).length
                    UpdatedFuelList = fuelList
                    if (fuelList[i] === "PETROL") {
                        UpdatedFuelList[j] = 'EXTERNAL FITTED CNG';
                        UpdatedFuelList[j + 1] = 'EXTERNAL FITTED LPG';
                    }
                }
            }
            else if (Product_id === 10) {
                UpdatedFuelList = fuelList;
            }
			console.log('UpdatedFuelList' +  JSON.stringify(UpdatedFuelList));
			$('.fuelgrid').empty();
			for (var i in UpdatedFuelList) {
					$('.fuelgrid').append(
					"<div class='center-align' onclick='variantmodel(" + JSON.stringify(UpdatedFuelList[i]) + ");'>" +
					"<div class='logoName' id= " + UpdatedFuelList[i] + ">" + UpdatedFuelList[i] +
					"</div>"
					)
			}
	});
}

function variantmodel(fuel){
	$('#mySearch').val("");
	fuelname = fuel;
	$('.spanvalue1').text(makename + ' / ' + modelname + ' / ' + fuelname);
	VehicleDivClass = "FuelDv";
	$('#' + VehicleDivClass + '1').addClass('active');
	var tempFuel = fuel;
	if (tempFuel === "EXTERNAL FITTED CNG" || tempFuel === "EXTERNAL FITTED LPG") {
        tempFuel = 'PETROL';
    }
	var FilterVariantList = [];
	  for (var i = 0; i < varientArray.length; i++) {
            if ((varientArray[i].Fuel_Name.toString().toLowerCase()).indexOf(tempFuel.toLowerCase()) > -1) {
                FilterVariantList.push(varientArray[i]);
            }
        
		}
		console.log(FilterVariantList);
		$('.alignvarName').empty();
		for (var i in FilterVariantList) {
					$('.alignvarName').append(
					"<div class='VariName center-align' style='text-align: left;' id='Variant_val_"+ FilterVariantList[i]['Vehicle_ID'] +"' onclick='FinalVariant(" + JSON.stringify(FilterVariantList[i]) + ");'>" 
					+ FilterVariantList[i]['Variant_Name'] +" " + "(" + FilterVariantList[i]['Cubic_Capacity'] + "CC)" +
					"</div>"
					)
			}
		$('.FuelDv').hide("slide", {direction: "left"}, 500, function () {
        $('.varDv').show("slide", {direction: "right"}, 200);
		$('.alignvarName').show();
    });
}

function FinalVariant(finalVarient){
		varientname = finalVarient.Variant_Name + ' (' + finalVarient.Cubic_Capacity + 'CC)';
		$('.spanvalue1').text(makename + ' / ' + modelname + ' / ' + fuelname + ' / ' + varientname);
		$('#mySearch').val("");
		var Final_makename = finalVarient.Make_Name;
		var Final_model = finalVarient.Model_Name;
		var Final_Vehicle_Variant = finalVarient.Variant_Name;
		var Final_FuelType = finalVarient.Fuel_Name;
		var Final_cubic_capacity = finalVarient.Cubic_Capacity + " CC";
		var Final_seating_capacity = finalVarient.Seating_Capacity + " SC";
        $('#spanvalue').val(Final_makename + ' - ' + Final_model + ' - ' + Final_Vehicle_Variant + ' - ' + Final_FuelType + ' - ' + Final_cubic_capacity + ' - ' + Final_seating_capacity);
		$("#Vehicle_Id").val(finalVarient.Vehicle_ID);
		$(".Make_section").hide();
}
function mySearch(val) {
        var value = val;
        value = value.toLowerCase();
        $(".makegrid *,.Modelgrid *,.vargrid *").filter(function () {
            $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            $('.Logodiv').css('display', 'block');
            $('.Logodiv img').css('display', 'block');
        });
    }
function mySearch1(val) {
        var value = val;
        value = value.toLowerCase();
        $(".shortgrid *,.shortgrid1 *").filter(function () {
            $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
        });
    }
function closePop() {
        $(".Make_section").slideUp(500, function () {
            $('.Make_section').hide();
            $('.regist_Pop').hide();
        })
    }
var getUrlVars = function () {
		var vars = [], hash;
        var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
            for (var i = 0; i < hashes.length; i++) {
                hash = hashes[i].split('=');
                vars.push(hash[0]);
                vars[hash[0]] = hash[1];
            }
            return vars;
        }
		
function getQTPopupDetails(qt_number){
	var QT_Details = [];
	var vehicleFullname = [];
	console.log(qt_number);
	$.get(CONST_HORIZON_URL + '/fresh_quotes/get_qt_details/' + qt_number, function (res) {
		console.log(res);
		QT_Details = res;
		if(QT_Details != null){
		QT_vehicle_id = QT_Details.Vehicle_Id;
		QT_rto_id = QT_Details.Rto_Id;
			if(QT_Details.hasOwnProperty('Row_Data')){
				var client_name = QT_Details.Row_Data.ClientName;
				var vehicle_name = QT_Details.Row_Data.Vehicle_Full;
				var rto_name = QT_Details.Row_Data.RTO_Full;
				$('#QTClientName').text("");
				$('#QTClientName').text("Hi " + client_name + ",");
			/*
			if(vehicle_name != ""){
				var tempVehicle = vehicle_name.split(" ");
				var makename = tempVehicle[0];
				var modelname = tempVehicle[1];
				var temp_varient_name = "";
				var cc = tempVehicle[tempVehicle.length-1] + "CC";
				var fuel = tempVehicle[tempVehicle.length-2];
				
				for (var i = 2; i <= tempVehicle.length-3; i++) {
					temp_varient_name += tempVehicle[i] + " ";
				}
				console.log(temp_varient_name);
				var vehicle = makename + " - " + modelname + " - " + temp_varient_name + " - " + fuel + " - " + cc;
				$('#spanvalue').val(vehicle);
				$("#Vehicle_Id").val(QT_vehicle_id);
			}*/
				$('#spanvalue').val(vehicle_name);
				$("#Vehicle_Id").val(QT_vehicle_id);
			
				if(rto_name != ""){
					var tempRto = rto_name.split(" ");
					var rto_code = tempRto[0];
					var rtoname = tempRto[1].toLowerCase();
					var rto = rto_code + " - " + (rtoname.charAt(0).toUpperCase() + rtoname.slice(1));
					$('#Registvalue').val(rto);
					$('#RTO_Id').val(QT_rto_id);
				}
			}
		}		
	});
}
function GeteditUrl() {
            var url = window.location.href;
            //alert(url.includes("health"));
            var newurl;
            //newurl = "http://qa.policyboss.com";
            if (url.includes("request_file")) {
                newurl = "http://localhost:50111";
            } else if (url.includes("qa")) {
                newurl = "http://qa.policyboss.com";
            } else if (url.includes("www") || url.includes("cloudfront")) {
                newurl = "https://www.policyboss.com";
            }
            return newurl;
        }
function calculateQuote(){
	var err = 0;
	$('.error_message').hide();
	var setVehicle = $('#spanvalue').val();
	var setRto = $('#Registvalue').val();
	if(setVehicle == ""){
		err++; 
		$('.ErrorSpanvalue').show();
		$('.ErrorSpanvalue').text("Please Select Vehicle");
	}else{
		$('.ErrorSpanvalue').text("");
		$('.ErrorSpanvalue').hide();
	}
	if(setRto == ""){
		err++; 
		$('.ErrorRegistvalue').show();
		$('.ErrorRegistvalue').text("Please Select RTO");
	}else{
		$('.ErrorRegistvalue').text("");
		$('.ErrorRegistvalue').hide();
	}
	if(err == 0){
		$('.loading').show();
		var erp_qt = qt_number;
		var rto_id = $('#RTO_Id').val();
		var vehicle_id = $('#Vehicle_Id').val();
		var tempClaimStatus = $('input[name=QTClaim]:checked').val();
		var claimStatus = tempClaimStatus === "noclaim" ? "no" : "yes";
		var vehicle_ncb_current = $('input[name=QTncbContaint]:checked').val();
		
		var url = '/fresh_quotes/posp_confirmation_process/' + erp_qt + '/' + rto_id + '/' + vehicle_id + '/' + claimStatus + '/' + vehicle_ncb_current;

		$.ajax({
					type: "GET",
					dataType: "json",
					 data : siteURL.indexOf('https') == 0 ?  { 'method_name': url } : "",
					url :  siteURL.indexOf('https') == 0 ?   GeteditUrl() + '/TwoWheelerInsurance/call_horizon_get' : CONST_HORIZON_URL + url,
					//url :  CONST_HORIZON_URL + url,
					success: function(res) {
						if(res['Msg'] === "Fail" && res.hasOwnProperty('Desc')){
							$('.errorText').text("");
							$('.errorText').text(res['Desc']['Msg']);
							$('.error_message').show();
							$('.loading').hide();
						}else{
							var srn = res['Desc']['Summary']['Request_Unique_Id'];
							//window.location.href = 'http://localhost:6200/quotes?SID=' + srn + '&ClientID=2' //local
							//window.location.href = 'http://qa.policyboss.com/Motor/quotes?SID=' + srn + '&ClientID=2' //UAT
							window.location.href = 'https://www.policyboss.com/Motor/quotes?SID=' + srn + '&ClientID=2' //LIVE
						}
					},
					error: function(result) {
					   
					}
		
		});	
	}
		
	
	// $.get(CONST_HORIZON_URL + url, function (res) {
		// console.log(res);
		// if(res['Msg'] === "Fail" && res.hasOwnProperty('Desc')){
			// $('.errorText').text("");
			// $('.errorText').text(res['Desc']['Msg']);
			// $('.error_message').show();
			// $('.loading').hide();
		// }else{
			// var srn = res['Desc']['Summary']['Request_Unique_Id'];
			// //window.location.href = 'http://localhost:6200/quotes?SID=' + srn + '&ClientID=2' //local
			// window.location.href = 'http://qa.policyboss.com/Motor/quotes?SID=' + srn + '&ClientID=2' //UAT
			// //window.location.href = 'https://www.policyboss.com/Motor/quotes?SID=' + srn + '&ClientID=2' //LIVE
		// }
	// })

}
